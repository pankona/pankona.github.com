<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>golang.tokyo#6@DeNA &middot; make clean; make</title>

    <meta name="description" content="">

    <meta name="generator" content="Hugo 0.32" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="golang.tokyo#6@DeNA &middot; make clean; make">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="golang.tokyo#6@DeNA &middot; make clean; make">
    <meta property="og:description" content="">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href="https://pankona.github.io/css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="make clean; make" href="https://pankona.github.io/atom.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://pankona.github.io">make clean; make</a></h1>
            <h2 class="brand-tagline"></h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/@gohan_pan_gohan"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/pankona "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://pankona.github.io/atom.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                <h1 class="content-subhead">01 Jun 2017, 19:34</h1>
                <section class="post">
                    <header class="post-header">
                        <a href="https://pankona.github.io/blog/2017/06/01/golangtokyo-6/" class="post-title">golang.tokyo#6@DeNA</a>
                        <p class="post-meta">
                            
                            
                                under 
                                
                                <a class="post-category post-category-golang" href="https://pankona.github.io/categories/golang">golang</a>
                            
                        </p>
                    </header>
                    <div class="post-description">
                        

<p>2017.06.01 に DeNA さんにて、golang.tokyo #6 が行われました。</p>

<p><a href="https://golangtokyo.connpass.com/event/57168/">golang.tokyo #6 - connpass</a></p>

<p>開幕は DeNA の方のお話だったんですが、何やら DeNA では Go エンジニアを色々募集しているようです！<br />
サーバーのみならず、色んなフィールドで Go を使っているとのことです。</p>

<p><img src="/images/golang.tokyo-6/3.jpg" alt="golang.tokyo-6" /><br />
今日も大勢の方が参加されております。</p>

<p><img src="/images/golang.tokyo-6/4.jpg" alt="golang.tokyo-6" /><br />
出遅れて私はありつけなかったですが、開幕前からお寿司が振る舞われていました！</p>

<p><img src="/images/golang.tokyo-6/5.jpg" alt="golang.tokyo-6" /><br />
私はおビールいただきました。</p>

<h1 id="gopher-fest-2017-に参加した話-by-tenntenn-さん">Gopher Fest 2017 に参加した話 by tenntenn さん</h1>

<ul>
<li>mercari テックブログ にて既にまとめられている tenntenn さんの記事もあります。<br />
(<a href="http://tech.mercari.com/entry/gopherfest2017_report">http://tech.mercari.com/entry/gopherfest2017_report</a>)<br />
<br /></li>
</ul>

<p>今日は参加レポートをしてくれました。<br />
主に 2017年8月上旬あたりにリリースされそうな Go 1.9 の話。</p>

<p>スライドはこちら。<br />
<a href="https://www.slideshare.net/takuyaueda967/gopher-fest-2017">https://www.slideshare.net/takuyaueda967/gopher-fest-2017</a></p>

<p>以下、話の中で気になって点のピックアップ。</p>

<h2 id="言語仕様の拡張-alias-の追加">言語仕様の拡張 - Alias の追加</h2>

<p>型にエイリアスが張れるようになるとのこと。<br />
以下のような書き方ができるようになる。</p>

<pre><code>type Applicant = http.Client
</code></pre>

<p>この場合、Applicant と http.Client は等価。</p>

<p>いつこれが役立つかというと、型をリネームするようなリファクタリングを行うとき。<br />
以下の手法だとうまく行かない。</p>

<p>(パターン1) 新しい型を作って順次移行する場合</p>

<pre><code>type Applicant Client
</code></pre>

<ul>
<li>Applicant は Client に生えていたメソッドを引き継げない。<br /></li>
<li>キャストは可能。<br />
<br /></li>
</ul>

<p>(パターン2) 埋め込みを使う場合</p>

<pre><code>type Applicant struct { Client }
</code></pre>

<ul>
<li>Applicant は Client に生えていたメソッドを引き継げる<br /></li>
<li>しかしキャストはできない<br />
<br /></li>
</ul>

<p>型エイリアスを用いると、</p>

<ul>
<li>両者等価なのでキャスト不要で交換可能<br /></li>
<li>メソッドもそのまま使える、が、エイリアス側に生やすことはできない<br />
<br /></li>
</ul>

<h4 id="参考">参考</h4>

<ul>
<li>安全にリファクタリングするには？<br />
<a href="https://talks.golang.org/2016/refactor.article">codebase refactoring (with help from Go) by rsc</a><br />
<br /></li>
</ul>

<h2 id="ライブラリへの変更">ライブラリへの変更</h2>

<h3 id="ビット演算ライブラリ">ビット演算ライブラリ</h3>

<p><a href="http://tip.golang.org/pkg/math/bits/">http://tip.golang.org/pkg/math/bits/</a><br />
各種ビット演算用の某がそろっております。</p>

<h3 id="sync-map">sync.Map</h3>

<p>スレッドセーフなマップが追加に。<br />
しかも make しないで 0 値のまま使えるらしく便利。</p>

<h3 id="os-exec-環境変数をコードで上書きできるように">os.Exec 環境変数をコードで上書きできるように</h3>

<p>環境変数で指定されている値をコード上で上書きできなかった。<br />
Go 1.9 からは後勝ち。より直感的な動作になる。コードで上書きできるように！</p>

<p>などなど。<br />
スライドには出ていませんでしたが、個人的には mips32 向けの softfloat サポートがどうなったか気になります。Go 1.9 でサポートされるんだったような。</p>

<p>次は DeNA の方。</p>

<h1 id="初めて-golang-で大規模-microservices-を作り得た教訓-by-yuichi-murata">初めて Golang で大規模 Microservices を作り得た教訓 by Yuichi MURATA</h1>

<p>DeNA の方です。<br />
AndApp を作ったときに得られた教訓の話。</p>

<p>Gin と Echo をさまよった話でさまざま苦労なさったそうな。<br />
失敗談をメインに話してくださったので、そういうのは割と貴重と思います。</p>

<p>スライドはこちら。<br />
<a href="https://www.slideshare.net/yuichi1004/golangtokyo-6-in-japanese">https://www.slideshare.net/yuichi1004/golangtokyo-6-in-japanese</a></p>

<h2 id="教訓1-go-でフレームワークに拘ることはない">教訓1. Go でフレームワークに拘ることはない。</h2>

<ul>
<li>Gin を使って開発を始める。<br /></li>
<li>ちょっと困ったことがあって、一部で別のフレームワーク (Echo) を使い始める<br /></li>
<li>両対応しつつ、また Echo 自身の開発がホットなせいで設計がどんどん変わってしまう<br />
<br /></li>
</ul>

<p>というようなことで、聞いているだけでしんどい気持ちでいっぱいでしたが、<br />
結論としては、フレームワークに頼らずに net/http 使っとくのが一番や、という話でした。<br />
ツールに振り回されるとツライですね。納得。</p>

<h2 id="教訓2-interface-を尊重する-エラーの型の話">教訓2. Interface を尊重する - エラーの型の話</h2>

<p>独自エラー型と error インターフェースを混在させると起こり得る罠。<br />
独自 error は nil 扱いされない問題。<br />
素直に error インターフェースの利用に統一するべきだという結論。</p>

<p>エラーの種類によって分岐したいとき等、結構ひとによってやり方がまちまちだという気がするので、<br />
なにがしかデファクトスタンダードなやり方が示されていると良い気がしますね。</p>

<p>ちなみに、自分が書くときの「エラーで分岐」については、<br />
deeeet さんの <a href="http://deeeet.com/writing/2016/04/25/go-pkg-errors/">Golangのエラー処理とpkg/errors</a> で記載されているやり方に従っている。</p>

<h2 id="regex-compile-reflection-の遅さ">regex compile / reflection の遅さ</h2>

<p>JSON Schema でバリデーション。<br />
OSS として扱った二種の速度の話。</p>

<ul>
<li>gojsonschema<br />

<ul>
<li>validation のたびに parse &amp; compile するので遅い<br /></li>
</ul></li>
<li>go-jsval<br />

<ul>
<li>こちらは速い<br />
<br /></li>
</ul></li>
</ul>

<p>regex / reflection 等の処理は遅いので、使うときは意識しないといけない</p>

<h2 id="結論">結論</h2>

<ul>
<li>Go の哲学。シンプルなアプローチを。<br /></li>
<li>「コンパイルする言語だから速い」と過信せず、パフォーマンスに気を配ろう。<br />
<br /></li>
</ul>

<p>以下、LT。</p>

<h1 id="ゲーム開発で必要な-by-konboi">ゲーム開発で必要な by @konboi</h1>

<p>カヤックの方。<br />
<a href="https://speakerdeck.com/konboi/gemukai-fa-nihaqian-kasenai-arewosiyututojian-ru">スライドはこちら</a></p>

<h2 id="csv-の話">CSV の話</h2>

<p>データの形によっては非常に見にくいCSV。<br />
いい感じに整形してくれるツールを作った！<br />
<a href="github.com/Konboi/csviewer">csvviewer</a></p>

<p>スターしておきました。</p>

<h1 id="go-code-review-comments-を読もう-by-knsh14">Go code Review Comments を読もう by knsh14</h1>

<p>KLabの方。スライドはこちら。<br />
<a href="https://speakerdeck.com/knsh14/go-code-review-comment-wofan-yi-sitahua">https://speakerdeck.com/knsh14/go-code-review-comment-wofan-yi-sitahua</a></p>

<p>こういう記事があって、Effective Go 簡易版というか、Go のお作法初級編みたく書かれている。<br />
<a href="https://github.com/golang/go/wiki/CodeReviewComments">Go Code review comments</a></p>

<p>それを日本語訳した！<br />
* <a href="http://qiita.com/knsh14/items/8b73b31822c109d4c497">Qiita の記事はこちら</a></p>

<p>初学者のみならず、ある程度経験がある人でも読んで損はないと思いました。<br />
認識を改めるというかね。ちなみに社内勉強会で使わせていただきました、感謝！</p>

<h1 id="scala-から-go-にきた話-by-james-さん">Scala から Go にきた話 by James さん</h1>

<p>エウレカの方。<br />
スライドは発見できませんでした…。</p>

<p>Scala が好きということは分かりました。<br />
悲しいアリクイかわいい。</p>

<h1 id="crypto-in-go-by-suzuki-kengo-さん">Crypto in Go by suzuki kengo さん</h1>

<p>マネーフォワードの方。</p>

<p>資料はこちら。アライさんですね。<br />
<a href="https://paper.dropbox.com/doc/Crypto-in-Go-cWLX9XxHQm6bAPqrZYkjt">https://paper.dropbox.com/doc/Crypto-in-Go-cWLX9XxHQm6bAPqrZYkjt</a></p>

<p>難しい。</p>

<h1 id="まとめ">まとめ</h1>

<p>ということで今回も参加させていただきました、ありがとうございました。<br />
失敗談というかアンチパターンというか、そういう話が聞けたのは大きな収穫でした。</p>

<p>2017.06.15 現在、既に次の golang.tokyo が企画されています。<br />
<a href="https://techplay.jp/event/624712">golang.tokyo #7</a><br />
気になる方は要チェックです！</p>

                    </div>
                    
                    <div class="post-share">
                        <div class="post-share-links">
                            <h4 style="">Share</h4>
                            
                            
                            
                            <a href="#" data-type="twitter" data-url="https://pankona.github.io/blog/2017/06/01/golangtokyo-6/" data-description="" data-via="" class="prettySocial fa fa-twitter"></a>
                            
                            
                        </div>
                    </div>
                    
                    
                </section>
            </div>
            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://pankona.github.io/js/all.min.js"></script>

        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
