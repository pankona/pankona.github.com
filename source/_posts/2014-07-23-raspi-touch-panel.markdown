---
layout: post
title: "PiTFTのタッチパネルを動作させる"
date: 2014-07-23 21:54:58 +0900
comments: true
categories: "RaspberryPi"
---

前回に引き続き、PiTFTの話題。

前回でPiTFTにコンソール画面だったりXの画面だったりを出力させるところまでいった。
タッチパネルの設定がまだだったので、手順を簡単に記しておく。

例によって、Raspberry PiにはArch Linuxが載っている前提。

### タッチパネルのドライバーをロードする

前回、FBTFTがビルトインされているカーネルを以下のコマンドでインストールした。

`$ sudo -E REPO_URI=https://github.com/notro/rpi-firmware BRANCH=builtin rpi-update`

これが正しく入っていれば、タッチパネルのドライバもカーネルに含まれているはず。
ただし、画面に何かを表示させる時と異なり、手動でドライバをロードする必要がある。

以下のコマンドで、タッチパネルのドライバをロードする。

@@@@ 忘れたのであとで追記する @@@@

基本的にはこれだけで動作すると思われる。
例によって[notroさんのところのWiki](https://github.com/notro/fbtft/wiki)に載っている内容だが、
notroさんのところは充実しすぎて逆に迷う気がするので、備忘録的に残しておくことにする。。

### 動いているか確かめる方法

evtestを用いて確かめられる。
evtestを起動したのちにタッチパネルをぐりぐり触ってみると、
タッチイベントの詳細がコンソールに出力される。

また、正常にドライバがロードされると、`/dev/input/touchpanel`なるファイルが現れるはずである。
ちなみにこれはeventXへのシンボリックリンクになっている。
このファイルの有無でもドライバのロードが正しく行われたか判断できると思われる。

### 要追記事項

* ドライバロードのコマンドをちゃんと確認する。
* キャリブレーション（回転した画面への対応）の方法。
